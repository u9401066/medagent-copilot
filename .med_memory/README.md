# MedAgent Memory System

> ğŸ§  **Copilot çš„é†«ç™‚è¨˜æ†¶ç³»çµ± - åˆ†å±¤æ¶æ§‹**

## ç›®éŒ„çµæ§‹

```
.med_memory/
â”œâ”€â”€ CONSTITUTION.md          â† ğŸ“œ æ†²æ³• (æ¯å€‹ MCP å·¥å…·å›å‚³éƒ½æœƒæé†’)
â”œâ”€â”€ knowledge/               â† ğŸ“š é€šç”¨é†«å­¸çŸ¥è­˜ (å¯è·¨ç—…äººä½¿ç”¨)
â”‚   â”œâ”€â”€ clinical_knowledge.md
â”‚   â”œâ”€â”€ fhir_functions.md
â”‚   â”œâ”€â”€ task_instructions.md
â”‚   â””â”€â”€ task_examples.md
â””â”€â”€ patient_context/         â† ğŸ”’ ç—…äººæƒ…å¢ƒè¨˜æ†¶ (åš´æ ¼éš”é›¢)
    â””â”€â”€ current_patient.json â† ç•¶å‰ç—…äººå·¥ä½œè¨˜æ†¶ (è‡ªå‹•ç®¡ç†)
```

## æ†²æ³•æ ¸å¿ƒåŸå‰‡

1. **ä¸€æ¬¡ä¸€ç—…äºº**: æ°¸é åªèƒ½è¼‰å…¥ä¸€ä½ç—…äººçš„è¨˜æ†¶
2. **ä»»å‹™å¾Œæ¸…é™¤**: å®Œæˆæ¯å€‹ä»»å‹™å¾Œå¿…é ˆæ¸…é™¤ç—…äººæƒ…å¢ƒ
3. **çŸ¥è­˜å¯å…±ç”¨**: knowledge/ ä¸‹çš„è³‡æ–™å¯ä»»æ„åƒè€ƒ
4. **éš±ç§å„ªå…ˆ**: ä¸è·¨ç—…äººå­˜å–ï¼Œä¸å¤–æ´©æ•æ„Ÿè³‡è¨Š

## MCP å·¥ä½œæµç¨‹

```
load_tasks() 
    â†“
get_next_task() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                            â”‚
load_patient_context(mrn)        â”‚
    â†“                            â”‚
[ä½¿ç”¨ FHIR å·¥å…·å®Œæˆä»»å‹™]          â”‚
    â†“                            â”‚
submit_answer()                  â”‚
    â†“                            â”‚
clear_patient_context() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
save_results() â†’ evaluate_results()
```

## æ–°å¢çš„ MCP å·¥å…·

| å·¥å…· | ç”¨é€” |
|-----|------|
| `get_constitution` | å–å¾—å®Œæ•´æ†²æ³•å…§å®¹ |
| `load_patient_context` | è¼‰å…¥ç—…äººæƒ…å¢ƒ (æœƒæ¸…é™¤èˆŠçš„) |
| `get_current_patient_context` | æŸ¥çœ‹ç•¶å‰ç—…äºº |
| `clear_patient_context` | æ¸…é™¤ç—…äººæƒ…å¢ƒ |
